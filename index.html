
<!DOCTYPE html>

<html>

<head>
	<title>Ghettoligan</title>
	<meta charset='utf-8' />
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.js"></script>
</head>

<style>

#myChartDiv{
	width:800px;
}

#murdersDiv{
	width:800px;
}

</style>

<body>
		<div id="myChartDiv">
			<canvas id="myChart"></canvas>
		</div>
		<div id="murdersDiv"></div>
</body>

<script>

	var ctx = document.getElementById("myChart");
	var mur = document.getElementById("murdersDiv");


	var xhrArea = new XMLHttpRequest();
	xhrArea.open("GET", 'http://nile16.nu:1203/area', true);
	xhrArea.onreadystatechange = function(){
		if(xhrArea.readyState == 4 && xhrArea.status == 200) {
			var stats=JSON.parse(xhrArea.responseText);
			l=[];
			d=[];
			for (var i=0;i<stats.length;i++) {
				l.push(stats[i][0]);
				d.push(stats[i][1]);
			}

			var myPieChart = new Chart(ctx,{
				type: 'bar',
				data: {
							labels: l,
							datasets: [
								{
									data: d,
									label: "Polisrapporter/km² sedan 2017-01-19",
									backgroundColor: [
										"#ff0000",
										"#ff0800",
										"#ff1000",
										"#ff1800",
										"#ff2000",
										"#ff2800",
										"#ff3000",
										"#ff3800",
										"#ff4000",
										"#ff4800",
										"#ff5000",
										"#ff5800",
										"#ff6000",
										"#ff6800",
										"#ff7000",
										"#ff7800",
										"#ff8000",
										"#ff8800",
										"#ff9000",
										"#ff9800"
									],
									hoverBackgroundColor: [
										"#ff0000",
										"#ff0800",
										"#ff1000",
										"#ff1800",
										"#ff2000",
										"#ff2800",
										"#ff3000",
										"#ff3800",
										"#ff4000",
										"#ff4800",
										"#ff5000",
										"#ff5800",
										"#ff6000",
										"#ff6800",
										"#ff7000",
										"#ff7800",
										"#ff8000",
										"#ff8800",
										"#ff9000",
										"#ff9800"
									]
								}]
						}
					});

		}
	}
	xhrArea.send();
	
	var xhrMord = new XMLHttpRequest();
	xhrMord.open("POST", 'http://nile16.nu:1203/search', true);
	xhrMord.onreadystatechange = function(){
		if(xhrMord.readyState == 4 && xhrMord.status == 200) {
			var stats=JSON.parse(xhrMord.responseText);
			for (var i=0;i<stats.length;i++) {
				mur.innerHTML+="<b>"+stats[i][1]+"</b><br>";
				mur.innerHTML+=stats[i][2]+"<br><br>";
			}


		}
	}
	xhrMord.send("mord dråp");

</script>


</html>